---
layout: post
title: "네이버 뉴스 추천"
parent: Blog
grand_parent: Study
nav_order: 2
date:   2023-07-19 21:30:00 +0900
---
# 네이버 뉴스 추천 알고리즘
{: .no_toc }

## 목차
{: .no_toc .text-delta }

1. TOC
{:toc}

[Reference](https://media.naver.com/algorithm)

## AI 기술 도입 배경
네이버 뉴스는 한국에서 사용자 규모가 가장 큰 포털이 제공하는 온라인 뉴스 서비스로, 매일 13M에 달하는 사용자가 방문하며 25K의 기사가 사용자에게 제공

### 문제 정의
언론사가 제공하는 수많은 기사들 가운데, 기존 수동 배열 방식으로 __모든 사용자에게 관심 있는 주제와 취향에 부합하는 기사를 제공하기 어렵다__

### 해결 방안
“사용자의 기사소비 이력” + “제목, 본문 등 기사내용”의 관계를 분석하여, 각 사용자가 관심있을만한 기사를 예측하는 콘텐츠 추천 기술

접속 환경이 모바일로 변화 $\rightarrow$ 로그인 사용자 비율이 대폭 증가 $\rightarrow$ 사용자의 기사소비 이력 축적 $\rightarrow$ 알고리즘 활용 + 빅데이터 기술 및 ML/DL

$\therefore$ 언론사의 수많은 기사 & 사용자의 로그 데이터를 학습하는 인공지능 기술을 활용하자.

## 알고리즘 서비스 영역 소개
2019년부터 자체 기사배열을 중단하고 언론사 편집(채널) 도입
- 언론사가 직접 편집한 기사를 사용자가 선택하는 구독 기반 서비스
- 생산자에게 주요 기사의 편집권을, 사용자에게 관심 있는 언론사의 선택권을 제공
- 다양한 기사를 제공하기 위한 보완책으로, AI 알고리즘에 기반한 추천 서비스를 제공함
    1. AiRS (AI Recommender System, 개인화 추천) ➡️ MY뉴스 (모바일)
    2. 뉴스 클러스터링 (기사 그룹핑) ➡️ 섹션별 뉴스 (모바일/PC)

## 추천 설계 고려 사항

|특성|설명|
|---|---|
|실시간 사용자 선호도 예측|매일 수만 건의 기사가 생산되는 뉴스 서비스 특성상, 사용자 선호도를 즉각적으로 예측하는 추천 모델 필요|
|자동화 방식으로 뉴스 품질 측정|저품질 기사를 추천할 시, 관심 주제라도 만족도가 낮다. 유사한 내용의 기사라면 품질 높은 기사가 사용자에게 추천되어야 하므로, 정량화된 방식의 기사 품질 측정 과정 필요|
|다수 사용자에게 추천 가능한 주요 이슈 감지|많은 언론사가 공통적으로 다루는 주제의 기사. 사용자의 평소 선호와 무관하게, 모두가 관심을 가지는 주요 이슈|
	
## AiRS
네이버가 뉴스 추천을 목적으로 자체 개발한 AI 알고리즘으로, 사용자가 관심을 갖고 볼만한 기사를 찾아줌으로써 기사 소비의 편의성과 사용자 만족을 추구.

### 알고리즘의 추천 과정

|과정|설명|
|---|---|
|1️⃣ 로그인 사용자가 기사를 소비한다|네이버 뉴스에 접속한 사용자가 특정 기사를 읽으면, 해당 기사에 대한 소비 이력 생성|
|2️⃣ 4개의 추천 모델로부터 기사 추천 후보군을 생성한다|CF, QE, SI (User-side and Press-side) 에서 후보군 생성|
|3️⃣ 생성 후보군 중, 다양한 피쳐를 반영하여 기사 간 랭킹을 매긴다|개인화 Feature (NPMI, 언론사, 키워드, 섹션, 기자구독 여부)와 비개인화 Feature (최신성, 품질, 인기, 클러스터, 소셜임팩트) 로 사용자의 선호도를 예측하고 추천 점수 및 랭킹|
|4️⃣ 서비스 화면에 사용자별로 뉴스를 추천한다|AiRS 추천뉴스라는 이름으로 여러 서비스 영역에서 사용자에게 제공|


CF (Collaborative Filtering, 협업 필터)
1. 나와 비슷한 관심사를 가진 사용자를 그룹핑
2. 그룹 내 인원이 함께 많이 본 기사를 찾는다
3. 해당 사용자가 선호할 것으로 예측된 기사를 추천한다.

QE (Quality Estimation, 품질 측정)
1. 기사 내 문서 Feature (제목, 본문, 이미지, 작성시간 등) 와 사용자 피드백 Feature (기사 조회수, 체류시간)을 활용하여 자동 품질 판단
2. NN을 이용하여, 기사 내 정보량이 풍부하고 사용자 만족도가 높은 기사를 선별한다.

SI (Social Impact, 사회적 영향도)
1. 뉴스 소비자 (단기간에 다수가 특정 이슈 집중 소비) 와 뉴스 공급자 (단기간에 언론사가 특정 이슈 기사화) 관점에서 SI 지수 지표 개발
2. 단기간에 급부상한 사회적 이슈를 감지하고, 사용자에게 추천할 기사 후보군 생성

### 알고리즘의 주요 Feature

|추천 모델|Feature|설명|
|---|---|---|
|개인화 (CF)|1️⃣ NPMI|CF 알고리즘 중 하나인 NPMI 모델로, 사용자가 `최근 클릭한 기사`들과 `함께 많이 클릭되는 기사`를 후보로 추출하고 추천 점수를 부여<br>- 두 개의 서로 다른 기사에 대해, 많은 사용자가 두 기사를 함께 읽을수록 높은 NPMI 점수<br>- 사용자가 클릭한 `n`개의 기사가 있을 때, 각 기사별로 Top-`m` NPMI 점수 후보를 추출하므로 $n\times m$ 개의 추천기사 후보 추출 가능|
|개인화|2️⃣ 섹션 선호도<br>3️⃣ 언론사 선호도<br>4️⃣ 제목 키워드 선호도<br>5️⃣ Entity 키워드 선호도<br>6️⃣ 기자 구독 여부<br>7️⃣ 언론사 구독 여부|2️⃣ 사용자가 최근에 해당 섹션 기사를 많이 클릭할수록 높은 값 부여<br>3️⃣ 사용자가 최근에 해당 언론사의 기사를 많이 클릭할수록 높은 값 부여<br>4️⃣ 클릭한 기사 제목에 존재하는 키워드 선호도; 키워드 포함 기사를 자주 클릭할수록🔺, 전체 기사에서 드물게 등장하는 키워드일수록 클릭당 증가폭<br>5️⃣ 클릭한 기사의 `제목+본문`에서 추출한 Entity 키워드가 포함된 기사를 자주 클릭할수록 선호도 증가<br>6️⃣ 구독한 기자의 기사인 경우에 가산점 부여<br>7️⃣ 구독한 언론사의 기사인 경우에 가산점 부여|
|비개인화 (QE)|8️⃣ 기사 품질 점수|QE 모델을 통해 자동으로 예측한 기사 품질 점수로, 기사`제목/본문/섹션/콘텐츠 타입 (예 - Only 글, 글&사진, 글&동영상)/이미지`를 기준으로 기사 품질 점수 예측|
|비개인화 (SI)|9️⃣ 기사 최신 인기도 점수<br>`10` 기사 클러스터 점수<br>`11` 기사 클러스터 최신성<br>`12` SI 점수|9️⃣ User-SI 모델을 통해, `기사의 클릭수로 측정한 인기도 점수`<br>`10` Press-SI 모델을 통해, `제목과 본문이 유사한 기사들을 묶어 기사 클러스터 점수`를 부여<br>`11` 최근에 생성된 기사 클러스터일수록 더 높은 값을 부여<br>`12` Press-SI 모델이 생성된 클러스터의 기사들이 User-SI 모델에서 선정한 최신 인기 기사에 해당하면 SI 점수를 부여함|
|비개인화|`13` 기사의 최신성<br>`14` 심층기사 여부<br>`15` 신문 지면 위치 점수<br>`16` 시간당 기사 생산량|`13` 최근에 작성된 기사일수록 더 높은 값 부여<br>`14` 언론사에서 심층 및 기획 기사로 선정한 기사에 대해 가산점 부여<br>`15` 신문 지면의 위치에 따라 가산점 부여<br>`16` 기사량이 적은 주말 또는 새벽 시간대에 클러스터 내 기사에 가산점 부여|

## 뉴스 클러스터링
AiRS 알고리즘의 SI 모델과 함께 주요한 사회적 이슈를 찾아내는 기술. 같은 시간대 비슷한 내용의 기사 다수를 묶어내어, 해당 기사 그룹을 하나의 __이슈__ 로 볼 수 있다.

### 클러스터링 과정
클러스터링 과정은 `10분`마다 기계적인 자동 분류를 반복한다
- 약 250개의 클러스터를 생산하고, 10분 간 서비스에 노출한다.
- AiRS 알고리즘이 __사용자에게 클러스터를 기사처럼 추천__ 하고, __클러스터 안에 묶인 기사 중 어떤 기사를 선호할지 사용자 별로 예측__

|단계|설명|
|---|---|
|1️⃣ 클러스터로 묶을 기사 선정|1. 네이버 뉴스에서 제공하는 __모든 기사 대상__ <br>2. 평일과 주말의 기사량 차이를 고려, __최대 36시간 이내 기사__ 포함<br>3. 연예, 스포츠, __일부 특화 영역에서 노출되는 기사 제외__<br>4. __내용이 짧거나 외국어로 된 기사도 클러스터링 품질 하락 이슈로 제외__|
|2️⃣ 형태소 분석|선별 기사를 대상으로 기사의 본문 및 제목의 형태소를 분석하고, 불규칙 활용이 발생한 용언은 원형으로 복원해 추출|
|3️⃣ 기사를 벡터화한다|각 기사별로 어떤 단어가 많이 사용됐는지 분석하고, TF-IDF 방식 적용<br>- 모든 기사에서 자주 나타난 단어는 중요도를 낮추고, 특정 기사에서 자주 나타난 단어의 중요도를 향상<br>- 해당 기사를 특징 짓는 중요 단어를 파악해 가중치를 주어 Vectorize|
|4️⃣ 유사도를 측정한다|벡터 간 유사도를 분석하여 기사 간 유사성을 계산하고, Cosine Similarity를 적용|
|5️⃣ 유사한 기사끼리 묶는다 (클러스터링)|Hierarchical Agglomerative Clustering|
|6️⃣ 생성된 클러스터의 점수를 부여한다|Scoring 과정에서 `클러스터의 전체 기사 수, 시간대에 따른 기사 비율` 고려<br> 클러스터에 속한 기사의 총 개수가 많고, 최근 작성된 기사가 많을 수록 높은 점수를 갖는다|


